.const input_port 1
.const output_port 2

.word last_input 0
.word input_value 0

mov r8 r8
jmp loop

isr_input:
    cli
    in input_value input_port
    push input_value
    call do_output
    mov last_input input_value
    sei
    ret

do_output:
    pop r8
    not r8
    out output_port r8
    ret

main:
    in input_value input_port
    push input_value
    call do_output

loop:
    mov r0 12345
    mov r1 54321
    mov r2 r1
    mul r2 r0
    mov r3 123
    mov r2 r0
    div r2 r3
    add r0 r1
    
    mov r0 49
    mov r1 7
    div r0 r1
    cmpi r0 r1
    #je 1000000

    jmp loop
